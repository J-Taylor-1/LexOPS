---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
library(LexOPS)
```

# LexOPS <img src="man/figures/hex.png" align="right" style="padding-left:10px;background-color:white;height:150px" />

<!-- badges: start -->
[![Lifecycle: stable](https://img.shields.io/badge/lifecycle-stable-brightgreen.svg)](https://www.tidyverse.org/lifecycle/#stable)
[![Version: 0.1.4](https://img.shields.io/badge/version-0.1.4-blue.svg)]()
<!-- badges: end -->

LexOPS is an R package for generating word stimuli, for use in Psychology experiments. It can generate stimuli for a factorial design specified by the user, controlling for selected lexical variables. The package has an inbuilt database of features for English words (`LexOPS::lexops`), but the user can also use their own list of features, for English words and/or for words in other languages.

## Installation

LexOPS can be installed as an R package with:

```{r, eval=FALSE}
if (!require("devtools")) install.packages("devtools")
devtools::install_github("JackEdTaylor/LexOPS@*release")
```

## Walkthrough

An in-depth walkthrough of the package is available here:

https://jackedtaylor.github.io/LexOPSdocs/

## TL;DR

### Shiny App

The package features an interactive shiny app, with several useful features such as visualising variables' distributions and relationships while generating stimuli. It's a friendly front-end to the functions detailed below. The LexOPS shiny app is available online at [https://jackt.shinyapps.io/lexops/](https://jackt.shinyapps.io/lexops/), but it is usually faster and more relilable to run it locally, with:

```{r, eval=FALSE}
LexOPS::run_shiny()
```

![](man/figures/shiny-preview.png)

### Code

LexOPS' functions allow you to easily generate stimuli in a reproducible way.

#### The "Generate Pipeline"

The following example pipeline generates 50 words (all nouns) per condition (200 words in total), for a study with a 2 x 2, concreteness (low, high) by bigram probability (low, high) experimental design. Words are controlled for by length exactly, and by word frequency within a tolerance of Â±0.2 Zipf. Matches are generated relative to each condition an equal number of times (`match_null="balanced"`).

```{r, include=FALSE}
set.seed(999)
```

```{r, eval = FALSE}
library(LexOPS)

# generate stimuli
stim <- lexops %>%
  subset(PoS.SUBTLEX_UK == "noun") %>%
  split_by(BG.SUBTLEX_UK, 0.001:0.004 ~ 0.008:0.011) %>%
  split_by(CNC.Brysbaert, 1:2 ~ 4:5) %>%
  control_for(Zipf.SUBTLEX_UK, -0.2:0.2) %>%
  control_for(Length) %>%
  generate(n = 50, match_null = "balanced")
```

```{r, warning = FALSE, echo = FALSE}
cat(sprintf("\n"))  # space between code and console output
stim <- lexops %>%
  subset(PoS.SUBTLEX_UK == "noun") %>%
  split_by(BG.SUBTLEX_UK, 0.001:0.004 ~ 0.008:0.011) %>%
  split_by(CNC.Brysbaert, 1:2 ~ 4:5) %>%
  control_for(Zipf.SUBTLEX_UK, -0.2:0.2) %>%
  control_for(Length) %>%
  generate(n = 50, match_null = "balanced")
```

A preview of what was generated:

```{r}
# create a table of the first 20 words (4 per row) as an example
stim %>%
  head(5) %>%
  knitr::kable()
```

#### Review Generated Stimuli

The `plot_design()` function produces a plot summarising the generated stimuli.

```{r fig1, dpi=400}
plot_design(stim)
```

#### Convert to Long Format

The `long_format()` function makes it easy to convert generated stimuli into long format.

```{r}
# present the same 20 words as in the last table
long_format(stim) %>%
  head(20) %>%
  knitr::kable()
```
